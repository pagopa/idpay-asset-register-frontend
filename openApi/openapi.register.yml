openapi: 3.0.1
info:
  title: IDPAY ITN Register Portal Operation API
  description: IDPAY ITN Register Portal Operation API
  version: '1.0'
  contact:
    name: PagoPA S.p.A.
    email: cstar@pagopa.it
servers:
  - description: Development Test
    url: https://api-io.dev.cstar.pagopa.it/idpay-itn/onboarding
    x-internal: true
  - description: User Acceptance Test
    url: https://api-io.uat.cstar.pagopa.it/idpay-itn/onboarding
    x-internal: true
tags:
  - name: products
    description: Operations related to product listing and filtering
  - name: user-permission
    description: Operations for retrieving user permissions
  - name: portal-consent
    description: Operations for managing portal consent (ToS)
  - name: products-upload
    description: Operations for uploading and verifying product files
  - name: institutions
    description: Operations related to institutions and producers
paths:
  /permissions:
    get:
      tags:
        - user-permission
      summary: Return User Permissions
      operationId: userPermission
      description: Retrieve the list of permissions associated with the current user.
      responses:
        '200':
          $ref: '#/components/responses/GET_permissions_200_Response'
        '400':
          $ref: '#/components/responses/GET_permissions_400_Response'
        '401':
          $ref: '#/components/responses/GET_permissions_401_Response'
        '404':
          $ref: '#/components/responses/GET_permissions_404_Response'
        '429':
          $ref: '#/components/responses/GET_permissions_429_Response'
        '500':
          $ref: '#/components/responses/GET_permissions_500_Response'
  /consent:
    get:
      tags:
        - portal-consent
      summary: Retrieve portal consent (ToS)
      operationId: getPortalConsent
      description: Returns the current version of the Terms of Service (ToS) for the
        portal.
      responses:
        '200':
          $ref: '#/components/responses/GET_consent_200_Response'
        '400':
          $ref: '#/components/responses/GET_consent_400_Response'
        '401':
          $ref: '#/components/responses/GET_consent_401_Response'
        '429':
          $ref: '#/components/responses/GET_consent_429_Response'
        '500':
          $ref: '#/components/responses/GET_consent_500_Response'
    post:
      tags:
        - portal-consent
      summary: Save portal consent
      description: Saves the user's acceptance of the Terms of Service (ToS).
      operationId: savePortalConsent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PortalConsentDTO'
        required: true
      responses:
        '200':
          $ref: '#/components/responses/POST_consent_200_Response'
        '400':
          $ref: '#/components/responses/POST_consent_400_Response'
        '401':
          $ref: '#/components/responses/POST_consent_401_Response'
        '404':
          $ref: '#/components/responses/POST_consent_404_Response'
        '429':
          $ref: '#/components/responses/POST_consent_429_Response'
        '500':
          $ref: '#/components/responses/POST_consent_500_Response'
  /product-files:
    post:
      tags:
        - products-upload
      summary: Upload CSV file containing a list of products
      description: 'ENG: Upload CSV file containing a list of products <br> IT: Caricamento
        del file CSV conentente una lista di prodotti'
      operationId: uploadProductList
      parameters:
        - $ref: '#/components/parameters/category_query'
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductFileDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_product-files_200_Response'
        '400':
          $ref: '#/components/responses/POST_product-files_400_Response'
        '401':
          $ref: '#/components/responses/POST_product-files_401_Response'
        '429':
          $ref: '#/components/responses/POST_product-files_429_Response'
        '500':
          $ref: '#/components/responses/POST_product-files_500_Response'
    get:
      tags:
        - products-upload
      summary: Returns the uploads history list
      description: 'ENG: Returns the history uploads list <br> IT: Lista storico caricamenti'
      operationId: getProductFilesList
      parameters:
        - $ref: '#/components/parameters/page_query'
        - $ref: '#/components/parameters/size_query'
      responses:
        '200':
          $ref: '#/components/responses/GET_product-files_200_Response'
        '400':
          $ref: '#/components/responses/GET_product-files_400_Response'
        '401':
          $ref: '#/components/responses/GET_product-files_401_Response'
        '429':
          $ref: '#/components/responses/GET_product-files_429_Response'
        '500':
          $ref: '#/components/responses/GET_product-files_500_Response'
  /product-files/verify:
    post:
      tags:
        - products-upload
      summary: Verify CSV file containing a list of products
      description: 'ENG: Verify CSV file containing a list of products <br> IT: Verifica
        del file CSV conentente una lista di prodotti'
      operationId: verifyProductList
      parameters:
        - $ref: '#/components/parameters/category_query'
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductFileDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_product-files_verify_200_Response'
        '400':
          $ref: '#/components/responses/POST_product-files_verify_400_Response'
        '401':
          $ref: '#/components/responses/POST_product-files_verify_401_Response'
        '429':
          $ref: '#/components/responses/POST_product-files_verify_429_Response'
        '500':
          $ref: '#/components/responses/POST_product-files_verify_500_Response'
  /product-files/{productFileId}/report:
    get:
      tags:
        - products-upload
      summary: Download errors report
      description: 'ENG: Download report containing errors from CSV validation<br>
        IT: Scarica il report contenente gli errori del controllo CSV'
      operationId: downloadErrorReport
      parameters:
        - $ref: '#/components/parameters/productFileId_path'
      responses:
        '200':
          $ref: '#/components/responses/GET_product-files_productFileId_report_200_Response'
        '400':
          $ref: '#/components/responses/GET_product-files_productFileId_report_400_Response'
        '401':
          $ref: '#/components/responses/GET_product-files_productFileId_report_401_Response'
        '429':
          $ref: '#/components/responses/GET_product-files_productFileId_report_429_Response'
        '500':
          $ref: '#/components/responses/GET_product-files_productFileId_report_500_Response'
  /product-files/batch-list:
    get:
      tags:
        - products-upload
      summary: Get report IDs
      description: 'ENG: Retrieve the list of batch IDs<br> IT: Recupera la lista
        degli id dei lotti'
      operationId: getBatchNameList
      parameters:
        - $ref: '#/components/parameters/x_organization_selected_header'
      responses:
        '200':
          $ref: '#/components/responses/GET_product-files_batch-list_200_Response'
        '400':
          $ref: '#/components/responses/GET_product-files_batch-list_400_Response'
        '401':
          $ref: '#/components/responses/GET_product-files_batch-list_401_Response'
        '429':
          $ref: '#/components/responses/GET_product-files_batch-list_429_Response'
        '500':
          $ref: '#/components/responses/GET_product-files_batch-list_500_Response'
  /products/update-status/approved:
    post:
      tags:
        - products
      summary: Approve a list of products
      description: 'ENG: Approve a list of products by updating their status to APPROVED. IT: Approva una lista di prodotti aggiornando il loro stato a APPROVED.'
      operationId: updateProductStatusApproved
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductsUpdateDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_products_update-status_200_Response'
        '400':
          $ref: '#/components/responses/POST_products_update-status_400_Response'
        '401':
          $ref: '#/components/responses/POST_products_update-status_401_Response'
        '429':
          $ref: '#/components/responses/POST_products_update-status_429_Response'
        '500':
          $ref: '#/components/responses/POST_products_update-status_500_Response'
  /products/update-status/wait-approved:
    post:
      tags:
        - products
      summary: Request approve for a list of products
      description: 'ENG: Reuqest approve a list of products by updating their status to WAIT_APPROVED. IT: Richiede approvazione di una lista di prodotti aggiornando il loro stato a WAIT_APPROVED.'
      operationId: updateProductStatusWaitApproved
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductsUpdateDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_products_update-status_200_Response'
        '400':
          $ref: '#/components/responses/POST_products_update-status_400_Response'
        '401':
          $ref: '#/components/responses/POST_products_update-status_401_Response'
        '429':
          $ref: '#/components/responses/POST_products_update-status_429_Response'
        '500':
          $ref: '#/components/responses/POST_products_update-status_500_Response'
  /products/update-status/supervised:
    post:
      tags:
        - products
      summary: Mark products as in supervision
      description: 'ENG: Set the status of a list of products to SUPERVISED. IT: Imposta lo stato di una lista di prodotti su SUPERVISED.        '
      operationId: updateProductStatusSupervised
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductsUpdateDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_products_update-status_200_Response'
        '400':
          $ref: '#/components/responses/POST_products_update-status_400_Response'
        '401':
          $ref: '#/components/responses/POST_products_update-status_401_Response'
        '429':
          $ref: '#/components/responses/POST_products_update-status_429_Response'
        '500':
          $ref: '#/components/responses/POST_products_update-status_500_Response'
  /products/update-status/rejected:
    post:
      tags:
        - products
      summary: Reject a list of products
      description: 'ENG: Reject a list of products by updating their status to REJECTED. IT: Rifiuta una lista di prodotti aggiornando il loro stato a REJECTED. '
      operationId: updateProductStatusRejected
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductsUpdateDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_products_update-status_200_Response'
        '400':
          $ref: '#/components/responses/POST_products_update-status_400_Response'
        '401':
          $ref: '#/components/responses/POST_products_update-status_401_Response'
        '429':
          $ref: '#/components/responses/POST_products_update-status_429_Response'
        '500':
          $ref: '#/components/responses/POST_products_update-status_500_Response'
  /products/update-status/restored:
    post:
      tags:
        - products
      summary: Restore a list of products
      description: 'ENG: Reject a list of products by updating their status to UPLOADED. IT: Ripristina una lista di prodotti aggiornando il loro stato a UPLOADED. '
      operationId: updateProductStatusRestored
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductsUpdateDTO'
      responses:
        '200':
          $ref: '#/components/responses/POST_products_update-status_200_Response'
        '400':
          $ref: '#/components/responses/POST_products_update-status_400_Response'
        '401':
          $ref: '#/components/responses/POST_products_update-status_401_Response'
        '429':
          $ref: '#/components/responses/POST_products_update-status_429_Response'
        '500':
          $ref: '#/components/responses/POST_products_update-status_500_Response'
  /products:
    get:
      tags:
        - products
      summary: Returns the products list
      description: 'ENG: Returns product list <br> IT: Lista prodotti'
      operationId: getProducts
      parameters:
        - $ref: '#/components/parameters/page_query'
        - $ref: '#/components/parameters/size_query'
        - $ref: '#/components/parameters/sort_query'
        - $ref: '#/components/parameters/category_query'
        - $ref: '#/components/parameters/brand_query'
        - $ref: '#/components/parameters/model_query'
        - $ref: '#/components/parameters/eprelCode_query'
        - $ref: '#/components/parameters/gtinCode_query'
        - $ref: '#/components/parameters/productFileId_query'
        - $ref: '#/components/parameters/productName_query'
        - $ref: '#/components/parameters/fullProductName_query'
        - $ref: '#/components/parameters/status_query'
        - $ref: '#/components/parameters/organizationId_query'
      responses:
        '200':
          $ref: '#/components/responses/GET_products_200_Response'
        '400':
          $ref: '#/components/responses/GET_products_400_Response'
        '401':
          $ref: '#/components/responses/GET_products_401_Response'
        '429':
          $ref: '#/components/responses/GET_products_429_Response'
        '500':
          $ref: '#/components/responses/GET_products_500_Response'
  /institutions/{institutionId}:
    get:
      tags:
        - institutions
      summary: Gets the corresponding institution using institution id
      description: 'ENG: Institution producer details <br> IT: Dettagli ente produttore'
      operationId: retrieveInstitutionById
      parameters:
        - $ref: '#/components/parameters/institutionId_path'
      responses:
        '200':
          $ref: '#/components/responses/GET_institutions_institutionId_200_Response'
        '400':
          $ref: '#/components/responses/GET_institutions_institutionId_400_Response'
        '401':
          $ref: '#/components/responses/GET_institutions_institutionId_401_Response'
        '429':
          $ref: '#/components/responses/GET_institutions_institutionId_429_Response'
        '500':
          $ref: '#/components/responses/GET_institutions_institutionId_500_Response'
  /institutions:
    get:
      tags:
        - institutions
      summary: Gets the institutions list
      description: 'ENG:  Gets the institutions list <br> IT: Recupera elenco delle
        istituzioni'
      operationId: getInstitutionsList
      responses:
        '200':
          $ref: '#/components/responses/GET_institutions_200_Response'
        '400':
          $ref: '#/components/responses/GET_institutions_400_Response'
        '401':
          $ref: '#/components/responses/GET_institutions_401_Response'
        '429':
          $ref: '#/components/responses/GET_institutions_429_Response'
        '500':
          $ref: '#/components/responses/GET_institutions_500_Response'
components:
  headers:
    X-RateLimit-Limit:
      description: The maximum number of requests allowed in the current period
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 1000000
    X-RateLimit-Remaining:
      description: The number of requests remaining in the current period
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 1000000
    X-RateLimit-Reset:
      description: The time at which the rate limit resets (in UTC epoch seconds)
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 9999999999
    Access-Control-Allow-Origin:
      description: CORS header to allow cross-origin requests
      schema:
        type: string
        maxLength: 255
        pattern: .*
    Retry-After:
      description: Indicates how long the user agent should wait before making a follow-up
        request
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 86400
  schemas:
    UserPermissionDTO:
      title: UserPermissionDTO
      type: object
      properties:
        role:
          type: string
          enum:
            - operatore
            - invitalia
            - invitalia_admin
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/PermissionDTO'
          description: List of permissions
          maxItems: 1000
    PermissionDTO:
      type: object
      properties:
        description:
          type: string
          maxLength: 255
          pattern: .*
        name:
          type: string
          maxLength: 255
          pattern: .*
        mode:
          type: string
          maxLength: 255
          enum:
            - disabled
            - enabled
    PortalConsentDTO:
      type: object
      properties:
        versionId:
          type: string
          maxLength: 255
          pattern: .*
        firstAcceptance:
          type: boolean
    PermissionErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - NOT_FOUND
            - VERSION_NOT_MATCHED
            - INVALID_REQUEST
            - TOO_MANY_REQUESTS
            - GENERIC_ERROR
          description: "\"ENG: Error code: NOT_FOUND: Permissions\
            \ not found,\n VERSION_NOT_MATCHED:  The version id does\
            \ not match,\n INVALID_REQUEST: Something went wrong handling\
            \ request,\n TOO_MANY_REQUESTS: Too many requests,\n GENERIC_ERROR:\
            \ Application Error - IT: Codice di errore:\n NOT_FOUND:\
            \ Permessi non trovati,\n VERSION_NOT_MATCHED: Gli ID\
            \ delle versioni non corrispondono,\n INVALID_REQUEST:\
            \ Qualcosa è andato storto durante l'invio della richiesta,\n TOO_MANY_REQUESTS:\
            \ Troppe richieste,\n GENERIC_ERROR: Errore generico\""
          pattern: .*
        message:
          type: string
          description: 'ENG: Error message - IT: Messaggio di errore'
          maxLength: 255
          pattern: .*
    RegisterUploadResponseDTO:
      type: object
      properties:
        status:
          type: string
          description: 'ENG: Status of the upload <br> IT: Stato del caricamento'
          enum:
            - OK
            - KO
        errorKey:
          type: string
          description: 'ENG: Error Key:
          <ul>
            <li>product.invalid.file.maxrow: too many records</li>
            <li>product.invalid.file.header: wrong headers</li>
            <li>product.invalid.file.size: file size exceeds limit</li>
            <li>product.invalid.file.report: error report generated</li>
            <li>product.invalid.file.extension: file extension not valid (must be csv)</li>
          </ul>
          <br>IT: Chiave di errore:
          <ul>
            <li>product.invalid.file.maxrow: numero di record non consentito</li>
            <li>merchant.invalid.file.header: headers non validi</li>
            <li>merchant.invalid.file.size: la dimensione del file supera il limite consentito</li>
            <li>merchant.invalid.file.report: il file caricato ha generato un report di errori</li>
            <li>product.invalid.file.vat.wrong: partita IVA o CF non valido</li>
            <li>product.invalid.file.extension: estensione file non valida (deve essere un csv)</li>
          </ul>
          <hr/>'

          enum:
            - product.invalid.file.extension
            - product.invalid.file.maxrow
            - product.invalid.file.maxsize
            - product.invalid.file.header
            - product.invalid.file.report
            - product.invalid.file.category
            - product.invalid.file.empty
            - product.invalid.file.already_in_progress
        productFileId:
          type: string
          description: 'ENG: Id of the partlial upload <br> IT: Id del caricamento
            parziale'
          minLength: 24
          maxLength: 24
          pattern: ^[a-fA-F0-9]{24}$
    CsvDTO:
      title: CsvDTO
      type: object
      properties:
        data:
          type: string
          maxLength: 2097152
          pattern: .*
    RegisterErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - TOO_MANY_REQUESTS
            - INVALID_REQUEST
            - GENERIC_ERROR
          description: '"ENG: Error code:<br> TOO_MANY_REQUESTS: Too many requests,<br>
            INVALID_REQUEST: Something went wrong handling the request,<br> GENERIC_ERROR:
            Application error,<br> - IT: Codice di errore:<br> TOO_MANY_REQUESTS:
            Troppe richieste,<br> INVALID_REQUEST: Qualcosa è andato storto durante
            l''invio della richiesta,<br> GENERIC_ERROR: Errore applicativo"'
          pattern: .*
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
          maxLength: 255
          pattern: .*
    UploadsListDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/UploadDTO'
          maxItems: 1000
        pageNo:
          type: integer
          format: int32
          description: 'ENG: The number of the page <br> IT: Il numero della pagina'
          minimum: 0
          maximum: 1000000
        pageSize:
          type: integer
          format: int32
          description: 'ENG: The element size for page <br> IT: Il numero di elementi
            per pagina'
          minimum: 0
          maximum: 1000000
        totalElements:
          type: integer
          format: int32
          description: 'ENG: The total number of the elements <br> IT: Il numero totale
            degli elementi'
          minimum: 0
          maximum: 1000000
        totalPages:
          type: integer
          format: int32
          description: 'ENG: The total number of the pages <br> IT: Il numero totale
            delle pagine'
          minimum: 0
          maximum: 1000000
    UploadDTO:
      type: object
      properties:
        productFileId:
          type: string
          description: 'ENG: The name of batch <br> IT: Nome del lotto'
          minLength: 24
          maxLength: 24
          pattern: ^[a-fA-F0-9]{24}$
        category:
          type: string
          description: 'ENG: The category of product in file <br> IT: Categoria dei
            prodotti contenuti nel file'
          enum:
            - Lavatrice
            - Lavasciuga
            - Piano cottura
            - Apparecchio di refrigerazione
            - Asciugatrice
            - Lavastoviglie
            - Cappa da cucina
            - Forno
        fileName:
          type: string
          description: 'ENG: The original name of file <br> IT: Nome originale del
            file csv'
          maxLength: 255
          pattern: ^.*\.csv$
        batchName:
          type: string
          description: 'ENG: The computed name of file <br> IT: Nome ricalcolato del
            file csv'
          pattern: ^(Apparecchi_di_refrigerazione|Cappe_Da_Cucina|Lavatrici|Lavastoviglie|Piani_Cottura|Forni|Lavasciuga|Asciugatrici)_[a-fA-F0-9]{24}\.csv$
          maxLength: 255
        uploadStatus:
          type: string
          description: 'ENG: The state of batch uploaded <br> IT: Lo stato del lotto
            caricato'
          maxLength: 255
          enum:
            - FORMAL_ERROR
            - PARTIAL
            - UPLOADED
            - IN_PROCESS
            - LOADED
        dateUpload:
          type: string
          description: 'ENG: The date of upload. Example format: "2025-10-07T07:34:30.163+00:00" (ISO 8601 MongoDB string) <br> IT: La data di caricamento. Esempio formato: "2025-10-07T07:34:30.163+00:00" (stringa ISO 8601 MongoDB)'
          maxLength: 255
        findedProductsNumber:
          type: number
          description: 'ENG: The number of products found in the batch <br> IT: Il
            numero di prodotti trovati nel lotto'
        addedProductNumber:
          type: number
          description: 'ENG: The number of products added to the register <br> IT:
            Il numero di prodotti aggiunti al registro'
    UploadsErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          maxLength: 255
          pattern: .*
        message:
          type: string
          maxLength: 255
          pattern: .*
    ProductListDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/ProductDTO'
          maxItems: 1000
        pageNo:
          type: integer
          format: int32
          description: 'ENG: The number of the page <br> IT: Il numero della pagina'
          minimum: 0
          maximum: 1000000
        pageSize:
          type: integer
          format: int32
          description: 'ENG: The element size for page <br> IT: Il numero di elementi
            per pagina'
          minimum: 0
          maximum: 1000000
        totalElements:
          type: integer
          format: int32
          description: 'ENG: The total number of the elements <br> IT: Il numero totale
            degli elementi'
          minimum: 0
          maximum: 1000000
        totalPages:
          type: integer
          format: int32
          description: 'ENG: The total number of the pages <br> IT: Il numero totale
            delle pagine'
          minimum: 0
          maximum: 1000000
    ProductStatus:
      type: string
      enum:
        - APPROVED
        - WAIT_APPROVED
        - REJECTED
        - SUPERVISED
        - UPLOADED
    ProductDTO:
      type: object
      properties:
        organizationId:
          type: string
          description: 'ENG: The name of organization <br> IT: Id del produttore'
          maxLength: 36
          pattern: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
        registrationDate:
          type: string
          description: 'ENG: Timestamps of insert (after EPREL checks). Example format: "2025-10-07T07:34:30.163+00:00" (ISO 8601 MongoDB string) <br> IT: Data caricamento prodotto (dopo la verifica EPREL). Esempio formato: "2025-10-07T07:34:30.163+00:00" (stringa ISO 8601 MongoDB)'
          maxLength: 255
        status:
          $ref: '#/components/schemas/ProductStatus'
        model:
          type: string
          description: 'ENG: The mode of the product <br> IT: il modello del prodotto'
          maxLength: 100
          pattern: ^.{1,100}$
        productGroup:
          type: string
          description: 'ENG: The EPREL category <br> IT: categoria EPREL'
          maxLength: 255
          pattern: .*
        category:
          type: string
          description: 'ENG: The category of the product <br> IT: categoria del prodotto'
          enum:
            - Lavatrice
            - Lavasciuga
            - Piano cottura
            - Apparecchio di refrigerazione
            - Asciugatrice
            - Lavastoviglie
            - Cappa da cucina
            - Forno
        brand:
          type: string
          description: 'ENG: The brand of the product <br> IT: brand del prodotto'
          maxLength: 100
          pattern: ^.{1,100}$
        eprelCode:
          type: string
          description: 'ENG: The EPREL code of the product <br> IT: Il code EPREL
            del prodotto'
          maxLength: 50
          pattern: ^\\d+$
        gtinCode:
          type: string
          description: 'ENG: The GTIN code of the product <br> IT: Il code GTIN del
            prodotto'
          maxLength: 14
          pattern: ^[a-zA-Z0-9]{1,14}$
        productCode:
          type: string
          description: 'ENG: The product code <br> IT: Il codice prodotto'
          maxLength: 100
          pattern: ^[a-zA-Z0-9 ]{0,100}$
          nullable: true
        energyClass:
          type: string
          description: 'ENG: The product energy class <br> IT: La classe energetica
            del prodotto'
          maxLength: 4
          pattern: ^(A\\+\\+\\+|A\\+\\+|A\\+|A|B|C|D|E|F|G)$
          nullable: true
        countryOfProduction:
          type: string
          description: 'ENG: The production country of the product <br> IT: il paese
            di produzione del prodotto'
          maxLength: 2
          pattern: ^[A-Z]{2}$
        batchName:
          type: string
          description: 'ENG: The batch name the product <br> IT: il nomelotto del
            prodotto'
          pattern: ^(Apparecchi_di_refrigerazione|Cappe_Da_Cucina|Lavatrici|Lavastoviglie|Piani_Cottura|Forni|Lavasciuga|Asciugatrici)_[a-fA-F0-9]{24}\\.csv$
          maxLength: 255
        linkEprel:
          type: string
          description: 'ENG: The EPREL product link <br> IT: Il link EPREL del prodotto'
          maxLength: 255
          format: uri
          nullable: true
        capacity:
          type: string
          description: 'ENG: The capacity of the product <br> IT: Capacità del  prodotto'
          maxLength: 255
          pattern: .*
          nullable: true
        productName:
          type: string
          description: 'ENG: The name of the product  <br> IT: Nome del prodotto'
          maxLength: 255
          pattern: .*
        fullProductName:
          type: string
          description: 'ENG: The name of the product with GTIN (for merchant)  <br> IT: Nome del prodotto con GTIN (per esercenti)'
          maxLength: 255
          pattern: .*
        statusChangeChronology:
          type: array
          items:
            properties:
              username:
                type: string
                maxLength: 200
                pattern: .*
              role:
                type: string
                maxLength: 2
                pattern: ^(L1|L2)$";
              motivation:
                type: string
                maxLength: 200
                pattern: .*
              updateDate:
                type: string
                maxLength: 255
                format: date
              currentStatus:
                $ref: '#/components/schemas/ProductStatus'
              targetStatus:
                $ref: '#/components/schemas/ProductStatus'
          maxItems: 1000
        organizationName:
          type: string
          maxLength: 50
          pattern: .*
        formalMotivation:
          type: string
          maxLength: 200
          pattern: .*
    InstitutionResponse:
      title: InstitutionResponse
      type: object
      properties:
        address:
          type: string
          maxLength: 255
          pattern: .*
        city:
          type: string
          maxLength: 255
          pattern: .*
        country:
          type: string
          maxLength: 255
          pattern: .*
        county:
          type: string
          maxLength: 255
          pattern: .*
        description:
          type: string
          maxLength: 255
          pattern: .*
        digitalAddress:
          type: string
          maxLength: 255
          format: email
        fiscalCode:
          type: string
          maxLength: 255
          pattern: .*
        vatNumber:
          type: string
          maxLength: 255
          pattern: .*
        zipCode:
          type: string
          maxLength: 255
          pattern: .*
    InstitutionsResponse:
      title: InstitutionsResponse
      type: object
      properties:
        institutions:
          type: array
          items:
            properties:
              instituionId:
                type: string
                maxLength: 255
                pattern: ^$|^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
              description:
                type: string
                maxLength: 255
                pattern: .*
              createAt:
                type: string
                maxLength: 255
                format: date
              updatedAt:
                type: string
                maxLength: 255
                format: date
          maxItems: 1000
    BatchList:
      title: BatchList
      type: array
      items:
        type: object
        properties:
          productFileId:
            type: string
            minLength: 24
            maxLength: 24
            pattern: ^[a-fA-F0-9]{24}$
          batchName:
            type: string
            pattern: ^(Apparecchi_di_refrigerazione|Cappe_Da_Cucina|Lavatrici|Lavastoviglie|Piani_Cottura|Forni|Lavasciuga|Asciugatrici)_[a-fA-F0-9]{24}\.csv$
            maxLength: 255
      maxItems: 1000
    ErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          maxLength: 255
          pattern: .*
        message:
          type: string
          maxLength: 255
          pattern: .*
    UpdateResponseDTO:
      type: object
      properties:
        status:
          type: string
          enum:
            - OK
            - KO
        errorKey:
          type: string
          nullable: true
          description: >
            ENG: Error Key for product status update:
            <ul>
              <li><b>product.update.error</b>: generic update error</li>
              <li><b>product.invalid.update.mixedStatus</b>: different current statuses in the same request are not allowed</li>
              <li><b>product.invalid.update.currentStatus</b>: provided currentStatus does not match the actual product status</li>
              <li><b>product.invalid.update.notFound</b>: one or more provided products (e.g. GTIN codes) were not found</li>
              <li><b>product.invalid.update.transitionNotAllowed</b>: transition from current to target status is not allowed</li>
            </ul>
            IT: Chiave di errore per l’aggiornamento stato prodotto:
            <ul>
              <li><b>product.update.error</b>: errore generico di aggiornamento</li>
              <li><b>product.invalid.update.mixedStatus</b>: nella stessa richiesta non sono consentiti prodotti con stati correnti diversi</li>
              <li><b>product.invalid.update.currentStatus</b>: il currentStatus fornito non coincide con lo stato reale del prodotto</li>
              <li><b>product.invalid.update.notFound</b>: uno o più prodotti (es. GTIN) non sono stati trovati</li>
              <li><b>product.invalid.update.transitionNotAllowed</b>: la transizione dallo stato corrente a quello di destinazione non è consentita</li>
            </ul>
          enum:
            - product.update.error
            - product.invalid.update.mixedStatus
            - product.invalid.update.currentStatus
            - product.invalid.update.notFound
            - product.invalid.update.transitionNotAllowed
    ProductFileDTO:
      required:
        - csv
      type: object
      properties:
        csv:
          type: string
          maxLength: 2097152
          format: binary
    ProductsUpdateDTO:
      type: object
      required:
        - gtinCodes
        - currentStatus
      properties:
        gtinCodes:
          type: array
          items:
            type: string
            maxLength: 14
            pattern: ^[a-zA-Z0-9]{1,14}$
          maxItems: 100
        currentStatus:
          $ref: '#/components/schemas/ProductStatus'
        motivation:
          type: string
          maxLength: 200
          pattern: .*
        formalMotivation:
          type: string
          maxLength: 200
          pattern: .*
  securitySchemes:
    Bearer:
      type: apiKey
      name: Authorization
      in: header
  responses:
    GET_permissions_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UserPermissionDTO'
          example:
            role: operatore
            permissions:
              - id: string
                name: string
                mode: enabled
    GET_permissions_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    GET_permissions_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
    GET_permissions_404_Response:
      description: The requested ID was not found
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: NOT_FOUND
            message: Permissions not found
    GET_permissions_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    GET_permissions_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: GENERIC_ERROR
            message: Application error
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    GET_consent_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PortalConsentDTO'
    GET_consent_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    GET_consent_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
    GET_consent_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    GET_consent_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: GENERIC_ERROR
            message: Application error
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    POST_consent_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
    POST_consent_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: VERSION_NOT_MATCHED
            message: The version id does not match
    POST_consent_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
    POST_consent_404_Response:
      description: The requested ID was not found
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: NOT_FOUND
            message: Permissions not found
    POST_consent_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    POST_consent_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionErrorDTO'
          example:
            code: GENERIC_ERROR
            message: Application error
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    POST_product-files_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterUploadResponseDTO'
    POST_product-files_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    POST_product-files_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    POST_product-files_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    POST_product-files_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: GENERIC_ERROR
            message: An error occurred during file reading
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    GET_product-files_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UploadsListDTO'
    GET_product-files_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UploadsErrorDTO'
          example:
            code: UPLOADS_INVALID_REQUEST
            message: Something went wrong handling request
    GET_product-files_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UploadsErrorDTO'
    GET_product-files_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UploadsErrorDTO'
          example:
            code: UPLOADS_TOO_MANY_REQUESTS
            message: Too many requests
    GET_product-files_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UploadsErrorDTO'
          example:
            code: UPLOADS_GENERIC_ERROR
            message: An error occurred during file reading
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    POST_product-files_verify_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterUploadResponseDTO'
    POST_product-files_verify_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    POST_product-files_verify_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    POST_product-files_verify_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    POST_product-files_verify_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: GENERIC_ERROR
            message: An error occurred during file reading
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    GET_product-files_productFileId_report_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CsvDTO'
    GET_product-files_productFileId_report_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    GET_product-files_productFileId_report_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    GET_product-files_productFileId_report_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    GET_product-files_productFileId_report_500_Response:
      description: Server ERROR
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: GENERIC_ERROR
            message: An error occurred during file reading
    GET_product-files_batch-list_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BatchList'
    GET_product-files_batch-list_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: INVALID_REQUEST
            message: Something went wrong handling request
    GET_product-files_batch-list_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    GET_product-files_batch-list_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: TOO_MANY_REQUESTS
            message: Too many requests
    GET_product-files_batch-list_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
          example:
            code: GENERIC_ERROR
            message: An error occurred during file reading
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    POST_products_update-status_200_Response:
      description: Products rejected successfully
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateResponseDTO'
    POST_products_update-status_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    POST_products_update-status_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    POST_products_update-status_429_Response:
      description: Too many requests
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    POST_products_update-status_500_Response:
      description: Server error
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RegisterErrorDTO'
    GET_products_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProductListDTO'
    GET_products_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_products_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_products_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_products_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    GET_institutions_institutionId_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/InstitutionResponse'
    GET_institutions_institutionId_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_institutionId_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_institutionId_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_institutionId_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
    GET_institutions_200_Response:
      description: Ok
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/InstitutionsResponse'
    GET_institutions_400_Response:
      description: Bad request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_401_Response:
      description: Authentication failed
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_429_Response:
      description: Too many Request
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
    GET_institutions_500_Response:
      description: Server ERROR
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorDTO'
      headers:
        Access-Control-Allow-Origin:
          $ref: '#/components/headers/Access-Control-Allow-Origin'
  parameters:
    category_query:
      name: category
      in: query
      required: false
      schema:
        type: string
        enum:
          - WASHINGMACHINES
          - WASHERDRIERS
          - OVENS
          - RANGEHOODS
          - DISHWASHERS
          - TUMBLEDRYERS
          - REFRIGERATINGAPPL
          - COOKINGHOBS
    page_query:
      name: page
      in: query
      required: false
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 10000
    size_query:
      name: size
      in: query
      required: false
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 1000
    productFileId_path:
      name: productFileId
      in: path
      required: true
      schema:
        type: string
        minLength: 24
        maxLength: 24
        pattern: ^[a-fA-F0-9]{24}$
    x_organization_selected_header:
      name: x-organization-selected
      in: header
      required: false
      schema:
        type: string
        maxLength: 36
        pattern: ^$|^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
    organizationId_query:
      name: organizationId
      in: query
      required: false
      schema:
        type: string
        maxLength: 36
        pattern: ^$|^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
    sort_query:
      name: sort
      in: query
      required: false
      schema:
        type: string
        enum:
          - category, desc
          - brand, desc
          - model, desc
          - batchName, desc
          - energyClass, desc
          - gtinCode, desc
          - eprelCode, desc
          - status, desc
          - organizationName, asc
          - category, asc
          - brand, asc
          - model, asc
          - batchName, asc
          - energyClass, asc
          - gtinCode, asc
          - eprelCode, asc
          - status, asc
          - organizationName, desc
    eprelCode_query:
      name: eprelCode
      in: query
      required: false
      schema:
        type: string
        maxLength: 50
        pattern: ^\d+$
    brand_query:
      name: brand
      in: query
      required: false
      schema:
        type: string
        maxLength: 50
        pattern: ^\d+$
    model_query:
      name: model
      in: query
      required: false
      schema:
        type: string
        maxLength: 50
        pattern: ^\d+$
    gtinCode_query:
      name: gtinCode
      in: query
      required: false
      schema:
        type: string
        maxLength: 14
        pattern: ^[a-zA-Z0-9]{1,14}$
    productFileId_query:
      name: productFileId
      in: query
      required: false
      schema:
        type: string
        minLength: 24
        maxLength: 24
        pattern: ^[a-fA-F0-9]{24}$
    status_query:
      name: status
      in: query
      required: false
      schema:
        $ref: '#/components/schemas/ProductStatus'
    productName_query:
      name: productName
      in: query
      required: false
      schema:
        type: string
        maxLength: 255
        pattern: .*
    fullProductName_query:
      name: fullProductName
      in: query
      required: false
      schema:
        type: string
        maxLength: 255
        pattern: .*
    institutionId_path:
      name: institutionId
      in: path
      required: true
      schema:
        type: string
        maxLength: 36
        pattern: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
security:
  - Bearer: []
